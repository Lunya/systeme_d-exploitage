#include "pageprovider.h"

#include "bitmap.h"
#include "system.h"

PageProvider::PageProvider()
{
	bitmap = new BitMap(NumPhysPages);
}

unsigned PageProvider::GetEmptyPage()
{
	// avoir une autre strategie ??
	int numPageAvail = bitmap->Find();
	memset(&(machine->mainMemory[numPageAvail * PageSize]), 0, PageSize);
	return numPageAvail;
}

void PageProvider::ReleasePage(int pageNumber)
{
	bitmap->Clear(pageNumber);
}

unsigned PageProvider::NumAvailPage()
{
	return bitmap->NumClear();
}
