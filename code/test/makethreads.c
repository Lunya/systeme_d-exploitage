#include "syscall.h"

/*
 * Ce programme, qui permet de tester la gestion des threads,
 * et donc la création, la destruction de multiples threads.
 * Il permet de tester nottament le bon déroulement du programme
 * si les threads terminent après le thread principal ainsi
 * que l'éxécution d'un très grand nombre de threads.
 * Une fonction "utilisateur" a été crée pour éviter de repréciser
 * ThreadExit dans chaque ThreadCreate (pour éviter de mettre ThreadExit
 * dans chaque fonction).
 */

void f(int a)
{
	PutString("Test F !\n");
	//ThreadExit();
}

void g(int a)
{
	PutString("Coucou G ?\n");
	//ThreadExit();
}

void user_ThreadCreate(void f(void *arg), void *arg) {
	ThreadCreate(f, arg, ThreadExit);
}

int
main()
{
	int i = 0;
	PutString("Début du test de makethreads.c\n");
	
	for (i = 0; i < 25 ; i++)
	{
		user_ThreadCreate(g, 3);
		user_ThreadCreate(f, 5);
	}

	PutString("Fin du test de makethreads.c\n");

}
